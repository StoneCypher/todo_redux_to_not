<!doctype html>
<html>

  <head>

    <script charset="utf-8" src="https://unpkg.com/react@latest/dist/react.js"></script>
    <script charset="utf-8" src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
    <script charset="utf-8" src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

    <script charset="utf-8" type="text/babel" src="todo.js"></script>

    <script charset="utf-8" type="text/babel">

        class TodoApp {

            constructor(tgt)  { this.app_state = { vfilter: 'SHOW_ALL', todos: [] }; this.tgt = tgt;    this.render(); }
            current_state()   { return this.app_state; }

            add_todo(todo)    { this.app_state.todos.push({completed:false, text:todo});                this.render(); }
            toggle_todo(i)    { this.app_state.todos[i].completed = !this.app_state.todos[i].completed; this.render(); }
            set_vfilter(vfil) { this.app_state.vfilter = vfil;                                          this.render(); }

            hooks()           { return {}; }

            render()          {

                ReactDOM.render(
                    <App hooks={this.hooks()} vfilter={this.app_state.vfilter} todos={this.app_state.todos} />,
                    this.dom_target
                );

            }

        }

        const App = new TodoApp(document.getElementById('tgt'));

    </script>

  </head>

  <body><div id="tgt"></div></body>

</html>
